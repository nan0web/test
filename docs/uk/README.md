# @nan0web/test

|[–°—Ç–∞—Ç—É—Å](https://github.com/nan0web/monorepo/blob/main/system.md#–Ω–∞–ø–∏—Å–∞–Ω–Ω—è-—Å—Ü–µ–Ω–∞—Ä—ñ—ó–≤)|–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è|–¢–µ—Å—Ç–æ–≤–µ –ø–æ–∫—Ä–∏—Ç—Ç—è|–§—É–Ω–∫—Ü—ñ—ó|–í–µ—Ä—Å—ñ—è Npm|
|---|---|---|---|---|
 |üü¢ `99.3%` |üß™ [English üè¥Û†ÅßÛ†Å¢Û†Å•Û†ÅÆÛ†ÅßÛ†Åø](https://github.com/nan0web/test/blob/main/README.md)<br />[–£–∫—Ä–∞—ó–Ω—Å—å–∫–æ—é üá∫üá¶](https://github.com/nan0web/test/blob/main/docs/uk/README.md) |üü¢ `96.4%` |‚úÖ d.ts üìú system.md üïπÔ∏è playground |1.0.0 |

–¢–µ—Å—Ç–æ–≤–∏–π –ø–∞–∫–µ—Ç —ñ–∑ –ø—Ä–æ—Å—Ç–∏–º–∏ —É—Ç–∏–ª—ñ—Ç–∞–º–∏ –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –≤ —Å–µ—Ä–µ–¥–æ–≤–∏—â—ñ node.js.
–†–æ–∑—Ä–æ–±–ª–µ–Ω–æ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ –¥–æ [—Ñ—ñ–ª–æ—Å–æ—Ñ—ñ—ó nan0web](https://github.com/nan0web/monorepo/blob/main/system.md#%D0%BD%D0%B0%D0%BF%D0%B8%D1%81%D0%B0%D0%BD%D0%BD%D1%8F-%D1%81%D1%86%D0%B5%D0%BD%D0%B0%D1%80%D1%96%D1%97%D0%B2),
–¥–µ –≤—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π –æ–∑–Ω–∞—á–∞—î –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É —Å–≤–æ–±–æ–¥—É —Ç–∞ –º—ñ–Ω—ñ–º–∞–ª—å–Ω—ñ –ø—Ä–∏–ø—É—â–µ–Ω–Ω—è.

–¶–µ–π –ø–∞–∫–µ—Ç –¥–æ–ø–æ–º–∞–≥–∞—î —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ ProvenDocs —Ç–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω—ñ –Ω–∞–±–æ—Ä–∏ –¥–∞–Ω–∏—Ö –∑ –ø—Ä–∏–∫–ª–∞–¥—ñ–≤ —Ç–µ—Å—Ç—ñ–≤,
–æ—Å–æ–±–ª–∏–≤–æ –∫–æ—Ä–∏—Å–Ω–∏–π –¥–ª—è —Ç–æ–Ω–∫–æ–≥–æ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è LLM.

## –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è

–Ø–∫ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –∑ npm?
```bash
npm install @nan0web/test
```

–Ø–∫ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –∑ pnpm?
```bash
pnpm add @nan0web/test
```

–Ø–∫ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –∑ yarn?
```bash
yarn add @nan0web/test
```

## –û—Å–Ω–æ–≤–Ω—ñ –∫–æ–Ω—Ü–µ–ø—Ü—ñ—ó

–¶–µ–π –ø–∞–∫–µ—Ç —Ä–æ–∑—Ä–æ–±–ª–µ–Ω–∏–π –±–µ–∑ –∑–æ–≤–Ω—ñ—à–Ω—ñ—Ö –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π —ñ –∑ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ—é —á—ñ—Ç–∫—ñ—Å—Ç—é:
- ‚úÖ –ü–æ–≤–Ω—ñ—Å—Ç—é —Ç–∏–ø—ñ–∑–æ–≤–∞–Ω–∏–π –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é **JSDoc** —Ç–∞ `.d.ts` —Ñ–∞–π–ª—ñ–≤
- üîÅ –ú—ñ—Å—Ç–∏—Ç—å —É—Ç–∏–ª—ñ—Ç–∏ –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –º–∞–∫–µ—Ç—ñ–≤ (mock) —Ä–µ–∞–ª—å–Ω–∏—Ö —Å—Ü–µ–Ω–∞—Ä—ñ—ó–≤ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è
- üß† –ü–æ–±—É–¥–æ–≤–∞–Ω–∏–π –¥–ª—è –∫–æ–≥–Ω—ñ—Ç–∏–≤–Ω–æ—ó —á—ñ—Ç–∫–æ—Å—Ç—ñ: –∫–æ–∂–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ—è –º–∞—î —á—ñ—Ç–∫–µ –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è
- üå± –î–æ–∑–≤–æ–ª—è—î –ª–µ–≥–∫–æ —Ç–µ—Å—Ç—É–≤–∞—Ç–∏ –±–µ–∑ –ø–æ–±—ñ—á–Ω–∏—Ö –µ—Ñ–µ–∫—Ç—ñ–≤

## –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è: –£—Ç–∏–ª—ñ—Ç–∏ –º–∞–∫–µ—Ç—É–≤–∞–Ω–Ω—è

### `mockFetch(routes)`
–£—Ç–∏–ª—ñ—Ç–∞ –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –º–∞–∫–µ—Ç–∞ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –æ–±'—î–∫—Ç–∞ `fetch` –¥–ª—è —Ç–µ—Å—Ç—ñ–≤.

* **–ü–∞—Ä–∞–º–µ—Ç—Ä–∏**
  * `routes` ‚Äì –º–∞—Å–∏–≤ –ø–∞—Ä `[pattern, response]` –∫–ª—é—á-–∑–Ω–∞—á–µ–Ω–Ω—è.
    - `pattern` ‚Äì —Ä—è–¥–æ–∫ —É —Ñ–æ—Ä–º–∞—Ç—ñ `"METHOD PATH"` (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `"GET /users"`).
    - `response` ‚Äì –∑–Ω–∞—á–µ–Ω–Ω—è –∞–±–æ –º–∞—Å–∏–≤ `[status, body]`.

* **–ü–æ–≤–µ—Ä—Ç–∞—î**
  * `function` ‚Äì —ñ–º—ñ—Ç–∞—Ç–æ—Ä —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ API `fetch(url, options)`.

* **–ü—Ä–∞–≤–∏–ª–∞ –∑—ñ—Å—Ç–∞–≤–ª–µ–Ω–Ω—è —à–ª—è—Ö—ñ–≤**
  - —Ç–æ—á–Ω–∏–π –∑–±—ñ–≥: `"GET /users"` –∑–±—ñ–≥–∞—î—Ç—å—Å—è –ª–∏—à–µ –∑ —Ü–∏–º —à–ª—è—Ö–æ–º
  - –¥–æ–≤—ñ–ª—å–Ω–∏–π –º–µ—Ç–æ–¥: `"* /users"` –∑–±—ñ–≥–∞—î—Ç—å—Å—è –∑ –±—É–¥—å-—è–∫–∏–º –º–µ—Ç–æ–¥–æ–º –¥–ª—è —Ü—å–æ–≥–æ —à–ª—è—Ö—É
  - –¥–æ–≤—ñ–ª—å–Ω–∏–π —à–ª—è—Ö: `"GET /users/*"` –∑–±—ñ–≥–∞—î—Ç—å—Å—è –∑ `/users/123`
  - —É–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω–∏–π: `"* *"` –∞–±–æ `"*"` –∑–±—ñ–≥–∞—î—Ç—å—Å—è –∑ —É—Å—ñ–º

  –Ø–∫—â–æ `response` —î `function`, –≤–æ–Ω–∞ –≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è –∑ `(method, url, options)`, —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è:
  - —è–∫—â–æ –ø–æ–≤–µ—Ä—Ç–∞—î –æ–±'—î–∫—Ç —ñ–∑ `.ok` —Ç–∞ `.json()`, —Ü–µ —Å—Ç–∞—î –º–∞–∫–µ—Ç–æ–º
  - —ñ–Ω–∞–∫—à–µ –≤–≤–∞–∂–∞—î—Ç—å—Å—è `[status, data]`, —Å—Ç–∞—Ç—É—Å –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º 200

–Ø–∫ —Å—Ç–≤–æ—Ä–∏—Ç–∏ –º–∞–∫–µ—Ç fetch API?
```js
import { mockFetch } from "@nan0web/test"
/** @type {Array<[string, any | any[] | Function]>} */
const routes = [
	['GET /users', { id: 1, name: 'John Doe' }],
	['POST /users', [201, { id: 2, name: 'Jane Smith' }]],
]
const fetch = mockFetch(routes)
const res = await fetch('/users')
const data = await res.json()

console.info(data) // ‚Üê { id: 1, name: 'John Doe' }
```

### `MemoryDB(options)`
–£—Ç–∏–ª—ñ—Ç–∞ –¥–ª—è —Å–∏–º—É–ª—è—Ü—ñ—ó —Ñ–∞–π–ª–æ–≤–æ—ó —Å–∏—Å—Ç–µ–º–∏ –≤ —Ç–µ—Å—Ç–∞—Ö.

* **–ü–∞—Ä–∞–º–µ—Ç—Ä–∏**
  * `options` ‚Äì –æ–±'—î–∫—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤, –≤–∫–ª—é—á–∞—î:
    - `predefined` ‚Äì Map —ñ–∑ –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ –≤–∏–∑–Ω–∞—á–µ–Ω–∏–º–∏ —Ñ–∞–π–ª–∞–º–∏ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `{ 'users.json': '[{ id: 1 }]' }`)

–Ø–∫ —Å—Ç–≤–æ—Ä–∏—Ç–∏ –º–∞–∫–µ—Ç —Ñ–∞–π–ª–æ–≤–æ—ó —Å–∏—Å—Ç–µ–º–∏ —á–µ—Ä–µ–∑ MemoryDB?
```js
import { MemoryDB } from "@nan0web/test"

const db = new MemoryDB({
	predefined: new Map([
		['file1.txt', 'content1'],
		['file2.txt', 'content2'],
	]),
})

await db.connect()
const content = await db.loadDocument('file1.txt')

console.info(content) // 'content1'
```

### `runSpawn(cmd, args, options)`
–£—Ç–∏–ª—ñ—Ç–∞ –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –º–∞–∫–µ—Ç–∞ —ñ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –¥–æ—á—ñ—Ä–Ω—ñ—Ö –ø—Ä–æ—Ü–µ—Å—ñ–≤ (CLI —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏).

* **–ü–∞—Ä–∞–º–µ—Ç—Ä–∏**
  * `cmd` ‚Äì –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è –∑–∞–ø—É—Å–∫—É (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `"git"`)
  * `args` ‚Äì –º–∞—Å–∏–≤ –∞—Ä–≥—É–º–µ–Ω—Ç—ñ–≤
  * `opts` ‚Äì –Ω–µ–æ–±–æ–≤‚Äô—è–∑–∫–æ–≤—ñ –æ–ø—Ü—ñ—ó –∑–∞–ø—É—Å–∫—É –∑ –æ–±—Ä–æ–±–Ω–∏–∫–æ–º `onData`

* **–ü–æ–≤–µ—Ä—Ç–∞—î**
  * `{ code: number, text: string }`

–Ø–∫ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ runSpawn —è–∫ —Ç–µ—Å—Ç–æ–≤–∏–π CLI —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç?
```js
import { runSpawn } from "@nan0web/test"

const { code, text } = await runSpawn('echo', ['hello world'])

console.info(code) // 0
console.info(text.includes('hello world')) // true

```

### `TestPackage(options)`
–ö–ª–∞—Å –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ –ø–µ—Ä–µ–≤—ñ—Ä—è–Ω–Ω—è –ø–∞–∫–µ—Ç—ñ–≤ –∑–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º–∏ nan0web.

* **–ü–∞—Ä–∞–º–µ—Ç—Ä–∏**
  * `options` ‚Äì –º–µ—Ç–∞–¥–∞–Ω—ñ –ø–∞–∫–µ—Ç–∞ —Ç–∞ –µ–∫–∑–µ–º–ø–ª—è—Ä –±–∞–∑–∏ –¥–∞–Ω–∏—Ö —Ñ–∞–π–ª–æ–≤–æ—ó —Å–∏—Å—Ç–µ–º–∏

–Ø–∫ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ø–∞–∫–µ—Ç —á–µ—Ä–µ–∑ TestPackage.run(rrs)?
```js
import { TestPackage, RRS } from "@nan0web/test"
const db = new MemoryDB()

db.set("system.md", "# system.md")
db.set("tsconfig.json", "{}")
db.set("README.md", "# README.md")
db.set("LICENSE", "ISC")

const pkg = new TestPackage({
	db,
	cwd: ".",
	name: "@nan0web/test",
	baseURL: "https://github.com/nan0web/test"
})

const rrs = new RRS()
const statuses = []

for await (const s of pkg.run(rrs)) {
	statuses.push(s.name + ':' + s.value)
}

console.info(statuses.join('\n'))
```

### `DocsParser`
–ü–∞—Ä—Å–µ—Ä –¥–ª—è –≤–∏–ª—É—á–µ–Ω–Ω—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó –∑ —Ç–µ—Å—Ç—ñ–≤ —ñ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó markdown (ProvenDoc).

–ß–∏—Ç–∞—î js-—Ç–µ—Å—Ç–∏ –∑ –∫–æ–º–µ–Ω—Ç–∞—Ä—è–º–∏, —Ç–∞–∫–∏–º–∏ —è–∫:
```js
it("–Ø–∫ –∑—Ä–æ–±–∏—Ç–∏ —â–æ—Å—å?", () => {
  ...
})
```
—ñ –ø–µ—Ä–µ—Ç–≤–æ—Ä—é—î —ó—Ö –Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω—ñ `.md` –¥–æ–∫—É–º–µ–Ω—Ç–∏.

–Ø–∫ –≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—é —á–µ—Ä–µ–∑ DocsParser?
```js
import { DocsParser } from "@nan0web/test"

const parser = new DocsParser()
const md = parser.decode(() => {
/**
	 * @docs
	 * # –ó–∞–≥–æ–ª–æ–≤–æ–∫
	 * –í–º—ñ—Å—Ç
 */
	it("–Ø–∫ –∑—Ä–æ–±–∏—Ç–∏ X?", () => {
		/**
		 * ```js
		 * doX()
		 * ```
		 */
		assert.ok(true)
	})
})

console.info(md) // ‚Üê markdown –∑ –≤–º—ñ—Å—Ç–æ–º –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ–≤ @docs
```

### `DatasetParser`
–ü–∞—Ä—Å–µ—Ä, —â–æ –ø–µ—Ä–µ—Ç–≤–æ—Ä—é—î markdown –¥–æ–∫—É–º–µ–Ω—Ç–∏ (—è–∫ README.md) –Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω—ñ `.jsonl` –Ω–∞–±–æ—Ä–∏ –¥–∞–Ω–∏—Ö.

–ö–æ–∂–µ–Ω –±–ª–æ–∫ "–Ø–∫ –∑—Ä–æ–±–∏—Ç–∏..." —Å—Ç–∞—î –æ–∫—Ä–µ–º–∏–º —Ç–µ—Å—Ç-–∫–µ–π—Å–æ–º:
```json
{"instruction": "–Ø–∫ –∑—Ä–æ–±–∏—Ç–∏ X?", "output": "```js\n doX()\n```", ...}
```

–Ø–∫ –≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ –Ω–∞–±—ñ—Ä –¥–∞–Ω–∏—Ö —ñ–∑ markdown –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó?
```js
import { DatasetParser } from "@nan0web/test"
const md = '# –ó–∞–≥–æ–ª–æ–≤–æ–∫\n\n–Ø–∫ –∑—Ä–æ–±–∏—Ç–∏ X?\n```js\ndoX()\n```'
const dataset = DatasetParser.parse(md, '@nan0web/test')

console.info(dataset[0].instruction) // ‚Üê "–Ø–∫ –∑—Ä–æ–±–∏—Ç–∏ X?"
```

## –ü—ñ—Å–æ—á–Ω–∏—Ü—è

–¶–µ–π –ø–∞–∫–µ—Ç –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –≤–∞–∂–∫—ñ –º–∞–∫–µ—Ç–∏ —á–∏ –≤—ñ—Ä—Ç—É–∞–ª—å–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞ ‚Äî –≤—ñ–Ω –º–æ–¥–µ–ª—é—î —ó—Ö –ª–µ–≥–∫–æ–≤–∞–≥–∏–º–∏ –æ–±–≥–æ—Ä—Ç–∫–∞–º–∏.
–í–∏ –º–æ–∂–µ—Ç–µ –µ–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—É–≤–∞—Ç–∏ —É –ø—ñ—Å–æ—á–Ω–∏—Ü—ñ —Ç–∞–∫:

–Ø–∫ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ CLI –ø—ñ—Å–æ—á–Ω–∏—Ü—é?
```bash
git clone https://github.com/nan0web/test.git
cd test
npm install
npm run playground
```

## –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ API

–ú–∞—î –±–∞–≥–∞—Ç–æ —Ç–µ—Å—Ç–æ–≤–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤, —â–æ –º–æ–∂–Ω–∞ —ñ–º–ø–æ—Ä—Ç—É–≤–∞—Ç–∏ –æ–∫—Ä–µ–º–æ:
```js
import { mockFetch, MemoryDB, DocsParser, DatasetParser, runSpawn } from "@nan0web/test"

```

## Java‚Ä¢Script —Ç–∏–ø–∏ —Ç–∞ –∞–≤—Ç–æ–∑–∞–ø–æ–≤–Ω–µ–Ω–Ω—è
–ü–∞–∫–µ—Ç –ø–æ–≤–Ω—ñ—Å—Ç—é —Ç–∏–ø—ñ–∑–æ–≤–∞–Ω–∏–π –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é jsdoc —ñ d.ts.

–°–∫—ñ–ª—å–∫–∏ d.ts —Ñ–∞–π–ª—ñ–≤ –º–∞—î –æ—Ö–æ–ø–∏—Ç–∏ –¥–∂–µ—Ä–µ–ª–æ?

## –í–Ω–µ—Å–æ–∫

–Ø–∫ –∑—Ä–æ–±–∏—Ç–∏ –≤–Ω–µ—Å–æ–∫? ‚Äì [–¥–∏–≤—ñ—Ç—å—Å—è —Ç—É—Ç](https://github.com/nan0web/test/blob/main/CONTRIBUTING.md)

## –õ—ñ—Ü–µ–Ω–∑—ñ—è

ISC ‚Äì [LICENSE](https://github.com/nan0web/test/blob/main/LICENSE)
