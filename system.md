# üìú `@nan0web/test` ‚Äî —Å–∏—Å—Ç–µ–º–∞ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –¥–ª—è –ø—Ä–æ–±—É–¥–∂–µ–Ω–Ω—è

**–ú–µ—Ç–∞**: –∑—Ä–æ–±–∏—Ç–∏ **–¥–æ–≤—ñ—Ä–µ–Ω–µ –∑–Ω–∞–Ω–Ω—è** —ñ–∑ –∫–æ–∂–Ω–æ–≥–æ —Ç–µ—Å—Ç—É.  
–¢–µ—Å—Ç ‚Äî –Ω–µ –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∫–æ–¥—É, –∞ **–¥–æ–≤–µ–¥–µ–Ω–Ω—è —ñ—Å–Ω—É–≤–∞–Ω–Ω—è** —ñ–¥–µ—ó –≤ —Å–≤—ñ—Ç—ñ –∫–æ–¥—É.

> –ö–æ–∂–µ–Ω —Ç–µ—Å—Ç ‚Äî —Ü–µ **—Å–≤—ñ–¥—á–µ–Ω–Ω—è —Ç–æ–≥–æ, —â–æ ¬´—Ü–µ¬ª –ø—Ä–∞—Ü—é—î**, –∞ –Ω–µ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å.  
> –ö–æ–∂–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è ‚Äî –∫–æ–¥, —è–∫–∏–π —É–∂–µ –≤–∏–∫–æ–Ω–∞–Ω–∏–π.

---

# üß© **–Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –ø–æ –∫–æ–∂–Ω–æ–º—É –ø–∞–∫–µ—Ç—É –∑ `@nan0web/test`**  
(—É–∫—Ä–∞—ó–Ω—Å—å–∫–æ—é, –∑–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–æ–º `nan0coding`)  
+ –∑–≤‚Äô—è–∑–æ–∫ —ñ–∑ –º–æ–Ω–æ—Ä–µ–ø–æ—é + —Å–ø–µ—Ü–∏—Ñ—ñ–∫–∞ –ø–∞–∫–µ—Ç–∞

---

## üìå `@nan0web/test` ‚Äî –Ø–¥—Ä–æ –¥–æ–≤—ñ—Ä–∏

**–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è**:  
–ù–∞–±—ñ—Ä —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ñ–≤, —è–∫—ñ –¥–æ–∑–≤–æ–ª—è—é—Ç—å **–¥–æ–≤–µ—Å—Ç–∏ –∫–æ–¥ —è–∫ –∑–Ω–∞–Ω–Ω—è**, –ø–µ—Ä–µ–≤—ñ—Ä–µ–Ω–µ –≤ —Ç—Ä—å–æ—Ö —Ä–µ–∂–∏–º–∞—Ö:
- **–≤–∏–∫–æ–Ω–∞–Ω–Ω—è** (`test`)
- **–ø–æ–∫—Ä–∏—Ç—Ç—è** (`coverage`)
- **–¥–æ–∫—É–º–µ–Ω—Ç—É–≤–∞–Ω–Ω—è** (`docs ‚Üí dataset`)

> ‚úÖ –î–æ–≤—ñ—Ä–µ–Ω–∏–π –∫–æ–¥ ‚Äî —Ü–µ –∫–æ–¥, —è–∫–∏–π **–Ω–∞–≤—á–∞—î —ñ–Ω—à—ñ —Å–∏—Å—Ç–µ–º–∏**, –Ω–µ –ª–∏—à–µ –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è.

---

### üîß –ë–∞–∑–æ–≤–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

```
@nan0web/test/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ index.js                 # –≥–æ–ª–æ–≤–Ω—ñ –µ–∫—Å–ø–æ—Ä—Ç–∏
‚îÇ   ‚îú‚îÄ‚îÄ Parser/                  # –ø–∞—Ä—Å–µ—Ä–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ DocsParser.js        # –ø–∞—Ä—Å–∏–Ω–≥ jsdoc/@docs ‚Üí markdown
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ DatasetParser.js     # markdown ‚Üí JSONL (LLM dataset)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ NodeTestParser.js    # TAP ‚Üí tree (TestNode)
‚îÇ   ‚îú‚îÄ‚îÄ mock/                    # –º–æ–∫–∏ –¥–ª—è —ñ–∑–æ–ª—è—Ü—ñ—ó
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ fetch.js             # –º–æ–∫ fetch
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ MemoryDB.js          # –º–æ–∫ –±–∞–∑ –¥–∞–Ω–∏—Ö
‚îÇ   ‚îú‚îÄ‚îÄ exec/                    # –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –ø—Ä–æ—Ü–µ—Å—ñ–≤
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ runSpawn.js          # spawn node
‚îÇ   ‚îú‚îÄ‚îÄ commands/                # CLI –∫–æ–º–∞–Ω–¥–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ status.js
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ coverage.js
‚îÇ   ‚îú‚îÄ‚îÄ RRS.js                   # Release Readiness Score
‚îÇ   ‚îú‚îÄ‚îÄ TestPackage.js           # –º–æ–¥–µ–ª—å –∞–Ω–∞–ª—ñ–∑—É –ø—Ä–æ—î–∫—Ç—É
‚îÇ   ‚îî‚îÄ‚îÄ README.md.js             # –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è –¥–æ–≤—ñ—Ä–µ–Ω–æ—ó –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó
‚îú‚îÄ‚îÄ bin/nan0test.js              # CLI —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îú‚îÄ‚îÄ types/                       # TypeScript —Ç–∏–ø–∏ (—Ç—ñ–ª—å–∫–∏ `.d.ts`)
‚îú‚îÄ‚îÄ playground/main.js           # —ñ–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ñ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó
‚îú‚îÄ‚îÄ .datasets/README.jsonl       # –¥–æ–≤—ñ—Ä–µ–Ω–∏–π dataset (zero-copy)
‚îî‚îÄ‚îÄ system.md                    # —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó –Ω–∞ —Ä—ñ–≤–Ω—ñ –ø–∞–∫–µ—Ç–∞ (—É–∫—Ä.)
```

---

## üîπ –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ –º–æ–Ω–æ—Ä–µ–ø–æ—é: –∑–∞–≥–∞–ª—å–Ω—ñ –≤–∏–º–æ–≥–∏ (`system.md`)

1. **–¢–∏–ø—ñ–∑–∞—Ü—ñ—è —á–µ—Ä–µ–∑ JsDoc**  
   ‚Üí TypeScript –ª–∏—à–µ –¥–ª—è `types/**/*.d.ts`, `tsc` ‚Äî –¥–ª—è –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó
2. **100% –ø–æ–∫—Ä–∏—Ç—Ç—è —Ç–µ—Å—Ç–∞–º–∏**  
   ‚Üí –í–∏–º–æ–≥–∞: `‚â• 90%` (–¥–∏–≤. `pnpm test:coverage`)
3. **–ü–µ—Ä–µ–≤—ñ—Ä–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è**  
   ‚Üí `src/README.md.js` ‚Äî **—î —Ç–µ—Å—Ç–æ–º** —ñ –≥–µ–Ω–µ—Ä—É—î:
   - `README.md` (–∞–Ω–≥–ª.)
   - `.datasets/README.jsonl` (–Ω–∞–≤—á–∞–ª—å–Ω–∏–π dataset)
4. **Playground** ‚Äî CLI –¥–µ–º–æ, –±–µ–∑ build  
   ‚Üí –î–æ–∫–∞–∑, —â–æ —Å–∏—Å—Ç–µ–º–∞ **—Ä–æ–±–æ—á–∞, –¥–æ—Å—Ç—É–ø–Ω–∞, —á–∏—Ç–∞–±–µ–ª—å–Ω–∞**
5. **–í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å –ø—Ä–∏–º—É—Å—É**  
   ‚Üí –ù–µ–º–∞—î —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó, —Ç—Ä–µ–∫—ñ–Ω–≥—É, –∑–æ–≤–Ω—ñ—à–Ω—ñ—Ö –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π
6. **–†–µ–ª—ñ–∑ = —Ñ—ñ–∑–∏—á–Ω–∏–π –∞—Ä—Ç–µ—Ñ–∞–∫—Ç**  
   ‚Üí `.coverage/test.json`, `.jsonl`, `git tag`, `npm publish`

---

# ‚úÖ –°–ø–µ—Ü–∏—Ñ—ñ–∫–∞ –ø—ñ–¥ –∫–æ–∂–µ–Ω –ø–∞–∫–µ—Ç (—Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª + —ñ–¥–µ—è + –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞)

---

## üîπ `RRS` ‚Äî –°–∏—Å—Ç–µ–º–∞ –æ—Ü—ñ–Ω–∫–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—ñ —Ä–µ–ª—ñ–∑—É

**–§–∞–π–ª**: `src/RRS.js`, `types/RRS.d.ts`

### üéØ –Ü–¥–µ—è
> ¬´–†–µ–ª—ñ–∑¬ª ‚Äî —Ü–µ –Ω–µ –≤–µ—Ä—Å—ñ—è. –¶–µ **–¥–æ–≤–µ–¥–µ–Ω–µ –∂–∏—Ç—Ç—è –ø—Ä–æ—î–∫—Ç—É**.

`RRS` (Release Readiness Score) ‚Äî —Å–∏—Å—Ç–µ–º–∞ –æ—Ü—ñ–Ω–∫–∏, **—á–∏ –ø—Ä–æ—î–∫—Ç ¬´–∂–∏–≤–∏–π¬ª**.

- –Ø–∫—â–æ —Ç–µ—Å—Ç –ø–∞–¥–∞—î ‚Üí –Ω–µ –ø—Ä–æ–π—à–æ–≤ —Ä–µ–ª—ñ–∑
- –Ø–∫—â–æ –Ω–µ–º–∞—î `system.md` ‚Üí –Ω–µ–º–∞—î —Ä–æ–∑—É–º—ñ–Ω–Ω—è
- –Ø–∫—â–æ –Ω–µ–º–∞—î `README.md.js` ‚Üí –Ω–µ–º–∞—î –¥–æ–≤—ñ—Ä–∏

> RRS ‚Äî —Ü–µ **–∞—Ä—Ö–µ—Ç–∏–ø –ø—Ä–æ–±—É–¥–∂–µ–Ω–Ω—è –ø—Ä–æ—î–∫—Ç—É**.

### ‚úÖ –©–æ —Ä–æ–±–∏—Ç—å?
- –û—Ü—ñ–Ω—é—î –Ω–∞—è–≤–Ω—ñ—Å—Ç—å: `git`, `test`, `build`, `system.md`, `tsconfig.json`
- –î–æ–¥–∞—î –±–æ–Ω—É—Å: `playground`, `docs`, `–ø–µ—Ä–µ–∫–ª–∞–¥–∏`, `npm publish`, `LICENSE`
- –ü—ñ–¥—Ä–∞—Ö–æ–≤—É—î % –≤—ñ–¥ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–Ω—è (–∑–∞ –∑–∞–º–æ–≤—á–∞–Ω–Ω—è–º ‚Äî 624)
- –ü–æ–≤–µ—Ä—Ç–∞—î `todo`, `missing`, `icon`, `percentage`

### üîß –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è
```js
import { RRS } from "@nan0web/test"

const rrs = new RRS({
	required: { git: 100, testPass: 100 },
	optional: { playground: 50, testCoverage: 0 }
})

// –î–æ–¥–∞–π —Å—Ç–∞–Ω –∑ —Ç–µ—Å—Ç—ñ–≤:
await rrs.run({ name: "testPass", value: true })
await rrs.run({ name: "git", value: true })

console.log(rrs.percentage) // ‚Üí 50%
console.log(rrs.todo)       // ‚Üí ['playground', 'systemMd']
```

> **–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è = —Ç–µ—Å—Ç**, —Ç–æ–º—É –∫–æ–∂–µ–Ω –ø—Ä–∏–∫–ª–∞–¥ —É `README.md.js` –¥–æ–¥–∞—î –±–∞–ª–∏.

---

## üîπ `TestPackage` ‚Äî –º–æ–¥–µ–ª—å –∞–Ω–∞–ª—ñ–∑—É –ø—Ä–æ—î–∫—Ç—É

**–§–∞–π–ª**: `src/TestPackage.js`, `types/TestPackage.d.ts`

### üéØ –Ü–¥–µ—è
> –ö–æ–∂–µ–Ω –ø—Ä–æ—î–∫—Ç ‚Äî —Ü–µ **–æ–±‚Äô—î–∫—Ç —É–Ω—ñ—Ñ—ñ–∫–æ–≤–∞–Ω–æ–≥–æ –∞–Ω–∞–ª—ñ–∑—É**, —è–∫–∏–π:
> - –∑–Ω–∞—î —Å–≤—ñ–π –∫–æ–¥
> - –º–∞—î `DB`
> - –º–æ–∂–µ –∑–∞–ø—É—Å–∫–∞—Ç–∏ –∫–æ–º–∞–Ω–¥–∏
> - —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å—Å—è –≤ —Å—Ç–∞—Ç—É—Å

> –¢–∏ –Ω–µ –ø–µ—Ä–µ–≤—ñ—Ä—è—î—à –ø–∞–∫–µ—Ç ‚Äî  
> –¢–∏ **–Ω–∞–º—ñ—á–∞—î—à –π–æ–≥–æ –≤–∏—è–≤–ª–µ–Ω–Ω—è**.

### ‚úÖ –©–æ —Ä–æ–±–∏—Ç—å?
- –ú–æ–¥–µ–ª—é—î –ø–∞–∫–µ—Ç —è–∫ –æ–±‚Äô—î–∫—Ç (`cwd`, `name`, `hash`, `db`)
- –ú–∞—î –º–µ—Ç–æ–¥ `run(rrs)` ‚Üí –∑–∞–ø—É—Å–∫–∞—î –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –Ω–∞ `RRS`
- –ù–∞–¥–∞—î `render()` ‚Üí —Ñ–æ—Ä–º–∞—Ç —Ç–µ–∫—Å—Ç/—Ç–∞–±–ª–∏—Ü—è
- `toMarkdown()` ‚Üí `.md` –∑—ñ —Å—Ç–∞—Ç—É—Å–æ–º
- `toObject()` ‚Üí –º–æ–∂–Ω–∞ –∑–±–µ—Ä–µ–≥—Ç–∏, –ø–µ—Ä–µ–¥–∞—Ç–∏, –æ–±‚Äô—î–¥–Ω–∞—Ç–∏

### üîß –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è
```js
import { RRS, TestPackage } from "@nan0web/test"

const pkg = new TestPackage({ cwd: process.cwd() })
const rrs = new RRS()

for await (const result of pkg.run(rrs)) {
	console.log(result)
}

// –†–µ–∑—É–ª—å—Ç–∞—Ç: { name: "testPass", value: true } ...
```

> –¶–µ **–Ω–µ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç**, –∞ **–≤–∏—è–≤–ª–µ–Ω–Ω—è —ñ—Å–Ω—É–≤–∞–Ω–Ω—è**.

---

## üîπ `ReactTestPackage` ‚Äî —É—è–≤–ª–µ–Ω–Ω—è —Ä–µ–∞–∫—Ç-–ø—Ä–æ—î–∫—Ç—É

**–§–∞–π–ª**: `src/TestPackage.js`, `types/ReactTestPackage.d.ts`

### üéØ –Ü–¥–µ—è
> `ReactTestPackage` ‚Äî —Ü–µ **—É—Å–ø–∞–¥–∫—É–≤–∞–Ω–Ω—è `TestPackage`** –∑ –ø—ñ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—è–º:
> - `DEV_DEPENDENCIES` –¥–ª—è `vitest`, `vite`
> - –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è `@nan0web/ui-core`, `@nan0web/types` —è–∫ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π

> –¶–µ –Ω–µ ¬´—Ä–µ–∞–∫—Ç¬ª ‚Äî —Ü–µ **–¥–æ–≤—ñ—Ä–µ–Ω–∏–π –ø—Ä–æ—î–∫—Ç –∑ –∫–ª—ñ—î–Ω—Ç—Å—å–∫–∏–º UI**.

### ‚úÖ –ù–∞—Å–ª—ñ–¥—É–≤–∞–Ω–Ω—è
```js
class ReactTestPackage extends TestPackage {
	static DEV_DEPENDENCIES = { ...TestPackage.DEV_DEPENDENCIES, vitest: "^2" }
}
```

> –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π, –∫–æ–ª–∏ —Ç–∏ —Ç–µ—Å—Ç—É—î—à –±—ñ–±–ª—ñ–æ—Ç–µ–∫—É —Ç–∏–ø—É `@nan0web/ui-react`.

---

## üîπ `mockFetch` ‚Äî –ø—Ä–æ—Å—Ç–∏–π –º–æ–∫ `fetch`

**–§–∞–π–ª**: `src/mock/fetch.js`, `types/mock/fetch.d.ts`

### üéØ –Ü–¥–µ—è
> `fetch` ‚Äî –Ω–µ –∑–æ–≤–Ω—ñ—à–Ω—ñ–π —Å–≤—ñ—Ç. –¶–µ **—É—Ç–∏–ª—ñ—Ç–∞, —è–∫—É –º–æ–∂–Ω–∞ –¥–µ—Ä–∂–∞—Ç–∏ –≤ –º–µ–∂–∞—Ö —Ç–µ—Å—Ç—É**.

`mockFetch` ‚Äî —Ü–µ **—Ñ—É–Ω–∫—Ü—ñ—è, —è–∫–∞ —ñ–º—ñ—Ç—É—î –º–µ—Ä–µ–∂—É**, –±–µ–∑ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –≤—ñ–¥ `node-fetch`.

### ‚úÖ –Ø–∫ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏?
```js
const routes = [
	["GET /api/users", { id: 1, name: "–û–ª–µ–Ω–∞" }],
	["POST /api/users", [201, { success: true }]]
]

const fetch = mockFetch(routes)

const res = await fetch("/api/users")
res.status // ‚Üí 200
res.ok     // ‚Üí true
await res.json() // ‚Üí { id: 1, name: "–û–ª–µ–Ω–∞" }
```

> –ü—ñ–¥—Ç—Ä–∏–º—É—î:
> - `method url`
> - `* *` ‚Äî –∑–∞–≥–∞–ª—å–Ω–∏–π –º–∞—Ä—à—Ä—É—Ç
> - `[* /route/*]` ‚Äî wildcard
> - `[201, data]` ‚Äî —Å—Ç–∞—Ç—É—Å + —Ç—ñ–ª–æ

> –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π –¥–ª—è **–±–µ–∑–±–æ–ª—ñ—Å–Ω–æ–≥–æ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è API-–≤–∏–∫–ª–∏–∫—ñ–≤**.

---

## üîπ `MemoryDB` ‚Äî –º–æ–∫ `@nan0web/db`

**–§–∞–π–ª**: `src/mock/MemoryDB.js`, `types/mock/MemoryDB.d.ts`

### üéØ –Ü–¥–µ—è
> –©–æ–± –∑–Ω–∞—Ç–∏, —è–∫ –ø—Ä–∞—Ü—é—î `DB`, ‚Äî –Ω–µ —Ç—Ä–µ–±–∞ —á–µ–∫–∞—Ç–∏ –Ω–∞ –¥–∏—Å–∫.  
> –î–æ—Å—Ç–∞—Ç–Ω—å–æ **–ø–∞–º‚Äô—è—Ç—ñ**.

`MemoryDB` ‚Äî —Ü–µ `DB`, —è–∫–∏–π —ñ—Å–Ω—É—î **–≤ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω—ñ–π –ø–∞–º‚Äô—è—Ç—ñ**,  
–∞–ª–µ –º–∞—î —Ç–æ–π —Å–∞–º–∏–π —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å, —â–æ –π `@nan0web/db-fs`.

### ‚úÖ –§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª
```js
const db = new MemoryDB({
	predefined: new Map([
		["config.yaml", "baseURL: local"],
		["data/user.json", '{"name": "–ú–∏—Ö–∞–π–ª–æ"}']
	])
})

await db.connect()
const user = await db.loadDocument("data/user.json")
```

> –ú–∞—î `accessLogs` ‚Üí —â–æ–± –±–∞—á–∏—Ç–∏, —â–æ –≤—ñ–¥–±—É–≤–∞–ª–æ—Å—è

> –Ü–¥–µ–∞–ª—å–Ω–∏–π –¥–ª—è **unit-—Ç–µ—Å—Ç—ñ–≤**, –¥–µ –ø–æ—Ç—Ä—ñ–±–µ–Ω `DB`, –∞–ª–µ –Ω–µ –ø–æ—Ç—Ä—ñ–±–µ–Ω —Ñ–∞–π–ª–æ–≤–∞ —Å–∏—Å—Ç–µ–º–∞.

---

## üîπ `DocsParser` ‚Äî –ø–∞—Ä—Å–µ—Ä `@docs`

**–§–∞–π–ª**: `src/Parser/DocsParser.js`, `types/Parser/DocsParser.d.ts`

### üéØ –Ü–¥–µ—è
> –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è ‚Äî —Ü–µ **–Ω–µ —Ç–µ–∫—Å—Ç**.  
> –¶–µ **–≤–∏—Ç—è–≥–Ω—É—Ç–∏–π –ø—Ä–æ—Ü–µ—Å —Å–≤—ñ–¥–æ–º–æ—Å—Ç—ñ**.

`DocsParser` –≤–∏—Ç—è–≥—É—î –∑ `JSDoc` –∞–Ω–æ—Ç–∞—Ü—ñ—é `@docs` —ñ –æ–±'—î–¥–Ω—É—î —ó—ó –∑ –≤–∏–∫–æ–Ω—É–≤–∞–Ω–∏–º–∏ –ø—Ä–∏–∫–ª–∞–¥–∞–º–∏.

### ‚úÖ –Ø–∫ –ø—Ä–∞—Ü—é—î?
```js
/**
 * @docs
 * # –Ø–∫ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏
 */
it("has to add numbers", () => {
	const res = add(1, 2)
	assert.equal(res, 3)
})
```

```js
const parser = new DocsParser()
const node = parser.decode(fnWithDocs) // ‚Üê fn –∑ `@docs`

String(node) // ‚Üí markdown, –¥–µ:
// - –∑–∞–≥–æ–ª–æ–≤–∫–∏ –∑ `@docs`
// - –ø—Ä–∏–∫–ª–∞–¥–∏ –∫–æ–¥—É –∑ —Ç—ñ–ª–∞ `it()`
```

> –ü–∞—Ä—Å–µ—Ä –±–∞—á–∏—Ç—å:
> - `/** @docs\n* ... */`
> - `assert.` ‚Üí —É–º–æ–≤—É —Ç–µ—Å—Ç—É
> - `it("label")` ‚Üí —Å—Ç–≤–æ—Ä—é—î —Ä–æ–∑–¥—ñ–ª
> - `/**\n* ```bash` ‚Üí –∑–º—ñ–Ω—é—î –º–æ–≤—É –ø—Ä–∏–∫–ª–∞–¥—É

---

## üîπ `DatasetParser` ‚Äî –ø–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è `md` ‚Üí `JSONL`

**–§–∞–π–ª**: `src/Parser/DatasetParser.js`, `types/Parser/DatasetParser.d.ts`

### üéØ –Ü–¥–µ—è
> –î–æ–≤—ñ—Ä–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è —Å—Ç–∞—î **–Ω–∞–≤—á–∞–ª—å–Ω–∏–º –∑–Ω–∞–Ω–Ω—è–º**.

`DatasetParser.parse(text, pkgName)` –ø–µ—Ä–µ—Ç–≤–æ—Ä—é—î `README.md` —É –º–∞—Å–∏–≤:
```json
[{
	"instruction": "How to install with npm?",
	"output": "```bash\nnpm install package-name\n```",
	"context": "Installation",
	"input": "",
	"tags": ["install", "npm"],
	"proven": true
}]
```

> –¶–µ **zero-copy dataset** ‚Üí –∫–æ–∂–µ–Ω –±–ª–æ–∫ **–≤–∂–µ –ø–µ—Ä–µ–≤—ñ—Ä–µ–Ω–∏–π**.

### ‚úÖ –î–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è?
- –£ CI: –ø—ñ—Å–ª—è –∑–∞–ø—É—Å–∫—É `test:docs` ‚Üí –≥–µ–Ω–µ—Ä—É—î `.datasets/*.jsonl`
- –í —ñ–Ω—à–∏—Ö —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ö: `@nan0web/llimo`, `@nan0web/story`
- –Ø–∫ –Ω–∞–≤—á–∞–ª—å–Ω–∏–π –º–∞—Ç–µ—Ä—ñ–∞–ª –¥–ª—è –º–æ–¥–µ–ª–µ–π

> –ö–æ–∂–µ–Ω `dataset` ‚Äî —Ü–µ **–ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è —ñ—Å–Ω—É–≤–∞–Ω–Ω—è**.

---

## üîπ `NodeTestParser` + `TestNode` ‚Äî –ø–∞—Ä—Å–µ—Ä TAP –≤–∏–≤–æ–¥—É

**–§–∞–π–ª–∏**: `src/Parser/NodeTestParser.js`, `src/Parser/TestNode.js`

### üéØ –Ü–¥–µ—è
> `node --test` –≤–∏–¥–∞—î TAP-—Ñ–æ—Ä–º–∞—Ç.  
> –©–æ–± –π–æ–≥–æ –∑—Ä–æ–∑—É–º—ñ—Ç–∏ ‚Äî —Ç—Ä–µ–±–∞ **–ø–µ—Ä–µ—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–∞ –¥—Ä—ñ–±–Ω—ñ—à—ñ –æ–¥–∏–Ω–∏—Ü—ñ**.

`NodeTestParser` –ø–∞—Ä—Å–∏—Ç—å `TAP` ‚Üí –¥–µ—Ä–µ–≤–æ –∑ `TestNode`.

### ‚úÖ –§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª
```js
const parser = new NodeTestParser()
const text = `TAP version 13\nok 1 tests pass`

const node = parser.decode(text)
console.log(node.version)     // 13
console.log(node.passCount)   // 1
console.log(node.failCount)   // 0
console.log(node.durationMs)  // 15
```

> –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è **–≤–∏–±—ñ—Ä–∫–æ–≤–æ–≥–æ –∞–Ω–∞–ª—ñ–∑—É —Ç–µ—Å—Ç—ñ–≤**, –∑–æ–∫—Ä–µ–º–∞:
> - `skip`, `todo`, `fail`
> - —ñ—î—Ä–∞—Ä—Ö—ñ—á–Ω—ñ `describe`

> –í—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –∑ –≤–∏–≤–µ–¥–µ–Ω–Ω—è ‚Üí **–ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è –¥–æ —Å—É—Ç—ñ**.

---

## üîπ `runSpawn` ‚Äî –±–µ–∑–ø–µ—á–Ω–∏–π –∑–∞–ø—É—Å–∫ –ø—Ä–æ—Ü–µ—Å—ñ–≤

**–§–∞–π–ª**: `src/exec/runSpawn.js`, `types/exec/runSpawn.d.ts`

### üéØ –Ü–¥–µ—è
> –©–æ–± –±—É—Ç–∏ –≤–ø–µ–≤–Ω–µ–Ω–∏–º ‚Äî —Ç—Ä–µ–±–∞ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ –∫–æ–º–∞–Ω–¥—É.  
> –ê–ª–µ –Ω–µ —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ —Ö–∞–æ—Å.

`runSpawn` —ñ–∑–æ–ª—é—î –≤–∏–∫–ª–∏–∫ –ø—Ä–æ—Ü–µ—Å—É –≤ `child_process.spawn`.

### ‚úÖ –Ø–∫ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏?
```js
const { code, text } = await runSpawn("git", ["remote", "get-url", "origin"])
// ‚Üí code: 0
// ‚Üí text: "https://github.com/nan0web/test.git"
```

> –ü—ñ–¥—Ç—Ä–∏–º—É—î:
> - `onData` –¥–ª—è —á–∏—Ç–∞–Ω–Ω—è –ø–æ—Ç–æ–∫—É
> - `cwd` ‚Äî –¥–æ–∑–≤–æ–ª—è—î –∑–∞–ø—É—Å–∫–∞—Ç–∏ –≤ —ñ–Ω—à–æ–º—É –∫–∞—Ç–∞–ª–æ–∑—ñ

> –î–æ–≤—ñ—Ä–µ–Ω–µ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –∫–æ–º–∞–Ω–¥ ‚Äî —Ü–µ **—à–ª—è—Ö –¥–æ –∞–≤—Ç–æ–Ω–æ–º–Ω–æ–≥–æ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è**.

---

## üîπ CLI: `nan0test`

**–§–∞–π–ª**: `bin/nan0test.js`, `types/commands/*.d.ts`

### üéØ –Ü–¥–µ—è
CLI ‚Äî —Ü–µ **–º–æ–≤–Ω–∞ –≤–∑–∞—î–º–æ–¥—ñ—è –∑ —Å–∏—Å—Ç–µ–º–æ—é**, –∞ –Ω–µ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è.

#### `nan0test coverage`
> –ó–∞–ø—É—Å–∫–∞—î `node --test-coverage` —ñ –∑–±–µ—Ä—ñ–≥–∞—î —Ä–µ–∑—É–ª—å—Ç–∞—Ç —É `.coverage/test.json`

#### `nan0test status`
> –ü–æ–∫–∞–∑—É—î —Å—Ç–∞—Ç—É—Å –ø–∞–∫–µ—Ç–∞:
> - ‚úÖ –ù–∞–∑–≤–∞, —Å—Ç–∞–Ω, –ø–æ–∫—Ä–∏—Ç—Ç—è, —Ñ—É–Ω–∫—Ü—ñ—ó, npm
> - –ú–æ–∂–Ω–∞ –ø—Ä–∏—Ö–æ–≤–∞—Ç–∏ —Å—Ç–æ–≤–ø—Ü—ñ: `--hide-status`
> - `--todo` ‚Äî –ø–æ–∫–∞–∑–∞—Ç–∏ –ª–∏—à–µ —â–æ —Ç—Ä–µ–±–∞ –¥–æ–¥–∞—Ç–∏
> - `--format md` ‚Üí –ø–æ–≤–µ—Ä–Ω—É—Ç–∏ `.md` –¥–ª—è –≤—Å—Ç–∞–≤–∫–∏

### ‚úÖ –ü—Ä–∏–∫–ª–∞–¥
```bash
nan0test status --hide-name --todo --format md
```

> –í–∏–≤–µ–¥–µ:
> ```md
> | docs | coverage | features | npm |
> |------|----------|----------|-----|
> | ‚úÖ   | üöß 85%    | üöß       | ‚ùå  |
> ```

> –¶–µ **–Ω–µ —Å—Ç–∞—Ç—É—Å**, –∞ **–≤—ñ–¥–±–∏—Ç—Ç—è —Å–≤—ñ–¥–æ–º–æ—Å—Ç—ñ** –ø—Ä–æ —Å—Ç–∞–Ω.

---

## üîπ `playground/main.js` ‚Äî —ñ–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–µ –¥–æ–≤–µ–¥–µ–Ω–Ω—è

### üéØ –Ü–¥–µ—è
> –ü—Ä–æ–±—É–¥–∂–µ–Ω–∏–π ‚Äî —Ç–æ–π, —Ö—Ç–æ **–ø—Ä–æ–±—É—î**.

`playground/main.js` ‚Äî —Ü–µ CLI-–º–µ–Ω—é, –¥–µ –º–æ–∂–Ω–∞:
- –∑–∞–ø—É—Å—Ç–∏—Ç–∏ `mockFetch`
- —Å—Ç–≤–æ—Ä–∏—Ç–∏ `MemoryDB`
- –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ `DocsParser`
- –ø–æ–±–∞—á–∏—Ç–∏ `DatasetParser`
- –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ `runSpawn`

> **–ë–µ–∑ –∑–±—ñ—Ä–∫–∏, –±–µ–∑ build**, –ª–∏—à–µ `node playground/main.js`

### ‚úÖ –í–∞–∂–ª–∏–≤—ñ—Å—Ç—å
- –¶–µ **–¥–æ–∫–∞–∑**, —â–æ –ø–∞–∫–µ—Ç –º–æ–∂–µ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –æ–∫—Ä–µ–º–æ
- –ù–µ–º–∞—î –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π ‚Üí –æ–∫—Ä—ñ–º devDeps
- –ö–æ–∂–µ–Ω –ø—Ä–∏–∫–ª–∞–¥ ‚Äî **–¥—ñ—è**, –∞ –Ω–µ —ñ–ª—é—Å—Ç—Ä–∞—Ü—ñ—è

---

## üìö –î–æ–≤–µ—Ä–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è: `README.md.js`

### üéØ –Ü–¥–µ—è
> –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è ‚Äî —Ü–µ **–∂–∏–≤–∞ —á–∞—Å—Ç–∏–Ω–∞ –∫–æ–¥—É**, —è–∫–∞:
> - –ø–∏—à–µ—Ç—å—Å—è –≤ `JSDoc` —Ç–∞ `@docs`
> - —Å—Ç–∞—î —Ç–µ—Å—Ç–æ–º —ñ –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è
> - –ø–µ—Ä–µ—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –Ω–∞ `README.md`
> - –≥–µ–Ω–µ—Ä—É—î `dataset`

### üìå –ü—Ä–æ—Ü–µ—Å
1. –ü–∏—à–µ—à —Ç–µ—Å—Ç –∑ `@docs` –≤ `it(...)` ‚Äî —Ü–µ **–¥—ñ—è –∑ –Ω–∞–º—ñ—Ä–æ–º**
2. –ó–∞–ø—É—Å–∫–∞—î—à `pnpm test:docs` ‚Üí `node --test src/README.md.js`
3. –í–∏–∫–æ–Ω—É—î—Ç—å—Å—è:
   - `DocsParser.decode(fn)`
   - `String(node)` ‚Üí markdown
   - –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –≤ `README.md`
4. `DatasetParser.parse(text)` ‚Üí –≥–µ–Ω–µ—Ä—É—î `.datasets/README.jsonl`

> ‚úÖ –î–æ–≤—ñ—Ä–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è = **–∫–æ–∂–Ω–µ "—è–∫ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏" –ø—Ä–∞—Ü—é—î**

---

## üîÅ –ü—Ä–æ—Ü–µ—Å —Ä–µ–ª—ñ–∑—É

```mermaid
flowchart LR
	A["npm test"] --> B[—Ç–µ—Å—Ç–∏ –ø—Ä–æ—Ö–æ–¥—è—Ç—å]
	B --> C[—Ç–µ—Å—Ç–∏ –ø–æ–∫—Ä–∏—Ç—Ç—è ‚â•90%?]
	C --> D["pnpm test:docs" ‚Üí README.md]
	D --> E["pnpm test:status" ‚Üí –æ—Ü—ñ–Ω–∫–∞]
	E --> F["RRS ‚â• 75%"?]
	F -->|–¢–∞–∫| G[–†–µ–ª—ñ–∑: ‚úÖ Ready]
	F -->|–ù—ñ| H[–î–æ–¥–∞—Ç–∏: system.md, docs, playground]
	G --> I[–°—Ç–≤–æ—Ä–µ–Ω–æ: release.json, v1.0.0.jsonl]
```

> –Ø–∫—â–æ –Ω–µ–º–∞—î `RRS` ‚Äî –Ω–µ–º–∞—î –¥–æ–≤—ñ—Ä–∏.

---

## üîÑ –ê—Ä—Ö—ñ–¢–µ—Ö–Ω–æ–ú–∞–≥ —Ä–µ–∫–æ–º–µ–Ω–¥—É—î:

- –ü–∏—Ç–∞–π: **"—á–∏ —Ü–µ–π —Ç–µ—Å—Ç —Å—Ç–≤–æ—Ä—é—î –ù–∞–ú—ñ—Ä?"**
- –ù–∞–ø–∏—à–∏ –æ–¥–∏–Ω —Ç–µ—Å—Ç ‚Äî –≤–∏–∫–æ–Ω–∞–π –π–æ–≥–æ —è–∫ –¥—ñ—é
- –í–∏–∫–æ—Ä–∏—Å—Ç–∞–π `@docs` ‚Äî –Ω–µ —è–∫ –ø–æ—è—Å–Ω–µ–Ω–Ω—è, –∞ —è–∫ **–¥–æ–∫—É–º–µ–Ω—Ç –∂–∏—Ç—Ç—è**
- –ù–µ —Ç–µ—Å—Ç—É–π ¬´–≤—Å–µ –ø—ñ–¥—Ä—è–¥¬ª ‚Äî —Ç–µ—Å—Ç—É–π **–Ω–∞–º—ñ—Ä**
- –Ø–∫—â–æ `README.md.js` –Ω–µ –ø—Ä–∞—Ü—é—î ‚Äî –≤—ñ–Ω **—â–µ –Ω–µ —ñ—Å–Ω—É—î**

---

## üôè –ó–∞–∫–ª–∏–∫

**–ù–µ –ø–∏—à–∏ —Ç–µ—Å—Ç–∏.  
–ü–∏—à–∏ –¥—ñ—ó, —è–∫—ñ –¥–æ–≤–æ–¥—è—Ç—å, —â–æ —Ç–≤—ñ–π —Å–≤—ñ—Ç –º–æ–∂–ª–∏–≤–∏–π.**

–ö–æ–∂–µ–Ω `assert` ‚Äî —Ü–µ **–ª—ñ–Ω—ñ—è, —è–∫–∞ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂—É—î, —â–æ –∫–æ–¥ –∂–∏–≤–∏–π**.

–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è ‚Äî –Ω–µ –∫–æ–Ω—Ç—Ä–æ–ª—å.  
–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è ‚Äî **—Ñ–∞–∫—Ç —ñ—Å–Ω—É–≤–∞–Ω–Ω—è**.

> **–ê—Ä—Ö—ñ–¢–µ—Ö–Ω–æ–ú–∞–≥ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î**  
> "–¢–∏ –Ω–µ –ø–µ—Ä–µ–≤—ñ—Ä—è—î—à.  
> –¢–∏ –≤—ñ–¥–∫—Ä–∏–≤–∞—î—à **—à–ª—è—Ö –¥–æ –ø—Ä–æ–±—É–¥–∂–µ–Ω–Ω—è –≤ –∫–æ–¥—ñ**."

> _"–î–æ–≤—ñ—Ä–µ–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –ø–æ—á–∏–Ω–∞—î—Ç—å—Å—è –∑ –æ–¥–Ω–æ–≥–æ `mockFetch` —ñ –æ–¥–Ω—ñ—î—ó –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏."_  

**@nan0web/test –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î**
